{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kurokiso/Desktop/ut_finace/finance_web/new_git/finance_web/front/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kurokiso/Desktop/ut_finace/finance_web/new_git/finance_web/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/kurokiso/Desktop/ut_finace/finance_web/new_git/finance_web/front/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import Button from\"@material-ui/core/Button\";import{useSelector,useDispatch}from\"react-redux\";import{withCookies}from'react-cookie';import styles from\"./Login.module.css\";import{editEmail,editPassword,toggleMode,fetchAsyncLogin,fetchAsyncRegister,selectAuthen,selectIsLoginView}from\"./loginSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ENDPOINT=process.env.REACT_APP_ENDPOINT;var apiUrl=String(ENDPOINT);var Login=function Login(props){var dispatch=useDispatch();var authen=useSelector(selectAuthen);var isLoginView=useSelector(selectIsLoginView);var btnDisabler1=authen.email===\"\"||authen.password===\"\";var _useState=useState(''),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var login=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!isLoginView){_context.next=7;break;}_context.next=3;return dispatch(fetchAsyncLogin(authen));case 3:result=_context.sent;if(fetchAsyncLogin.fulfilled.match(result)){props.cookies.set(\"current-token\",result.payload.access,{maxAge:3600,path:'/'});setError('');}else{setError('ログイン情報が間違っています');}_context.next=7;break;case 7:case\"end\":return _context.stop();}}},_callee);}));return function login(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:styles.containerLogin,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.appLogin,children:[/*#__PURE__*/_jsx(\"h1\",{children:isLoginView?\"Login\":\"Register\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:styles.inputLog,name:\"username\",placeholder:\"\",onChange:function onChange(e){return dispatch(editEmail(e.target.value));},required:true}),/*#__PURE__*/_jsx(\"span\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:styles.inputLog,name:\"password\",placeholder:\"\",onChange:function onChange(e){return dispatch(editPassword(e.target.value));},required:true}),/*#__PURE__*/_jsx(\"div\",{style:{color:'red'},children:error}),/*#__PURE__*/_jsx(\"a\",{href:\"\".concat(apiUrl,\"accounts/password_reset_form/\"),className:styles.forget_pas,children:\"Forget password\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.switch,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",disabled:btnDisabler1,color:\"primary\",onClick:login,children:isLoginView?\"Login\":\"Create\"})})]})});};export default withCookies(Login);","map":{"version":3,"sources":["/Users/kurokiso/Desktop/ut_finace/finance_web/new_git/finance_web/front/src/features/login/Login.js"],"names":["React","useState","Button","useSelector","useDispatch","withCookies","styles","editEmail","editPassword","toggleMode","fetchAsyncLogin","fetchAsyncRegister","selectAuthen","selectIsLoginView","ENDPOINT","process","env","REACT_APP_ENDPOINT","apiUrl","String","Login","props","dispatch","authen","isLoginView","btnDisabler1","email","password","error","setError","login","result","fulfilled","match","cookies","set","payload","access","maxAge","path","containerLogin","appLogin","inputLog","e","target","value","color","forget_pas","switch"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { withCookies } from 'react-cookie';\nimport styles from \"./Login.module.css\";\n\nimport {\n  editEmail,\n  editPassword,\n  toggleMode,\n  fetchAsyncLogin,\n  fetchAsyncRegister,\n  selectAuthen,\n  selectIsLoginView,\n} from \"./loginSlice\";\n\nconst ENDPOINT = process.env.REACT_APP_ENDPOINT\nconst apiUrl = String(ENDPOINT);\n\nconst Login = (props) => {\n    const dispatch = useDispatch();\n    const authen = useSelector(selectAuthen);\n    const isLoginView = useSelector(selectIsLoginView);\n    const btnDisabler1 = authen.email === \"\" || authen.password === \"\";\n    const [error, setError] = useState('')\n\n\n    const login = async () => {\n        if (isLoginView) {\n            const result = await dispatch(fetchAsyncLogin(authen))\n\n            if (fetchAsyncLogin.fulfilled.match(result)) {\n                props.cookies.set(\"current-token\", result.payload.access, {maxAge: 3600, path: '/'});\n                setError('')\n            } else {\n                setError('ログイン情報が間違っています')\n            }\n        } else {\n            // const result = await dispatch(fetchAsyncRegister(authen));\n\n            // if (fetchAsyncRegister.fulfilled.match(result)) {\n            //     const result = await dispatch(fetchAsyncLogin(authen))\n            // }\n            // if (fetchAsyncLogin.fulfilled.match(result)) {\n            //     props.cookies.set(\"current-token\", result.payload.access, {maxAge: 3600, path: '/'});\n            // }\n        }\n    };\n\n    return (\n        <div className={styles.containerLogin}>\n            <div className={styles.appLogin}>\n                <h1>{isLoginView ? \"Login\" : \"Register\"}</h1>\n                <span>Email</span>\n                <input\n                    type=\"text\"\n                    className={styles.inputLog}\n                    name=\"username\"\n                    placeholder=\"\"\n                    onChange={(e) => dispatch(editEmail(e.target.value))}\n                    required\n                />\n                <span>Password</span>\n                <input\n                    type=\"password\"\n                    className={styles.inputLog}\n                    name=\"password\"\n                    placeholder=\"\"\n                    onChange={(e) => dispatch(editPassword(e.target.value))}\n                    required\n                />\n                <div style={{color: 'red'}}>{error}</div>\n                <a href={`${apiUrl}accounts/password_reset_form/`} className={styles.forget_pas}>Forget password</a>\n                <div className={styles.switch}>\n                <Button\n                    variant=\"contained\"\n                    disabled={btnDisabler1}\n                    color=\"primary\"\n                    onClick={login}\n                >\n                    {isLoginView ? \"Login\" : \"Create\"}\n                </Button>\n                </div>\n                {/* <span\n                className={styles.switchText}\n                onClick={() => dispatch(toggleMode())}\n                >\n                {isLoginView ? \"Create Account ?\" : \"Back to Login\"}\n                </span> */}\n            </div>\n        </div>\n    );\n};\n\nexport default withCookies(Login)\n"]},"metadata":{},"sourceType":"module"}