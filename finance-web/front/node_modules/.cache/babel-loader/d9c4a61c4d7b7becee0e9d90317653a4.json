{"ast":null,"code":"var _jsxFileName = \"/Users/kurokiso/Desktop/ut_finace/finance_web/new_git/finance_web/front/src/features/login/Login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { withCookies } from 'react-cookie';\nimport styles from \"./Login.module.css\";\nimport { editEmail, editPassword, toggleMode, fetchAsyncLogin, fetchAsyncRegister, selectAuthen, selectIsLoginView } from \"./loginSlice\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ENDPOINT = process.env.REACT_APP_ENDPOINT;\nconst apiUrl = String(ENDPOINT);\n\nconst Login = props => {\n  _s();\n\n  const dispatch = useDispatch();\n  const authen = useSelector(selectAuthen);\n  const isLoginView = useSelector(selectIsLoginView);\n  const btnDisabler1 = authen.email === \"\" || authen.password === \"\";\n  const [error, setError] = useState('');\n\n  const login = async () => {\n    if (isLoginView) {\n      const result = await dispatch(fetchAsyncLogin(authen));\n\n      if (fetchAsyncLogin.fulfilled.match(result)) {\n        props.cookies.set(\"current-token\", result.payload.access, {\n          maxAge: 3600,\n          path: '/'\n        });\n        setError('');\n      } else {\n        setError('ログイン情報が間違っています');\n      }\n    } else {// const result = await dispatch(fetchAsyncRegister(authen));\n      // if (fetchAsyncRegister.fulfilled.match(result)) {\n      //     const result = await dispatch(fetchAsyncLogin(authen))\n      // }\n      // if (fetchAsyncLogin.fulfilled.match(result)) {\n      //     props.cookies.set(\"current-token\", result.payload.access, {maxAge: 3600, path: '/'});\n      // }\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.containerLogin,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.appLogin,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: isLoginView ? \"Login\" : \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Email\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        className: styles.inputLog,\n        name: \"username\",\n        placeholder: \"\",\n        onChange: e => dispatch(editEmail(e.target.value)),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"Password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"password\",\n        className: styles.inputLog,\n        name: \"password\",\n        placeholder: \"\",\n        onChange: e => dispatch(editPassword(e.target.value)),\n        required: true\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n        href: `${apiUrl}accounts/password_reset_form/`,\n        className: styles.forget_pas,\n        children: \"Forget password\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.switch,\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"contained\",\n          disabled: btnDisabler1,\n          color: \"primary\",\n          onClick: login,\n          children: isLoginView ? \"Login\" : \"Create\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Login, \"ej9ZVw+qLHTEzNAWJcnxjoh0Owo=\", false, function () {\n  return [useDispatch, useSelector, useSelector];\n});\n\n_c = Login;\nexport default _c2 = withCookies(Login);\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Login\");\n$RefreshReg$(_c2, \"%default%\");","map":{"version":3,"sources":["/Users/kurokiso/Desktop/ut_finace/finance_web/new_git/finance_web/front/src/features/login/Login.js"],"names":["React","useState","Button","useSelector","useDispatch","withCookies","styles","editEmail","editPassword","toggleMode","fetchAsyncLogin","fetchAsyncRegister","selectAuthen","selectIsLoginView","ENDPOINT","process","env","REACT_APP_ENDPOINT","apiUrl","String","Login","props","dispatch","authen","isLoginView","btnDisabler1","email","password","error","setError","login","result","fulfilled","match","cookies","set","payload","access","maxAge","path","containerLogin","appLogin","inputLog","e","target","value","forget_pas","switch"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { withCookies } from 'react-cookie';\nimport styles from \"./Login.module.css\";\n\nimport {\n  editEmail,\n  editPassword,\n  toggleMode,\n  fetchAsyncLogin,\n  fetchAsyncRegister,\n  selectAuthen,\n  selectIsLoginView,\n} from \"./loginSlice\";\n\nconst ENDPOINT = process.env.REACT_APP_ENDPOINT\nconst apiUrl = String(ENDPOINT);\n\nconst Login = (props) => {\n    const dispatch = useDispatch();\n    const authen = useSelector(selectAuthen);\n    const isLoginView = useSelector(selectIsLoginView);\n    const btnDisabler1 = authen.email === \"\" || authen.password === \"\";\n    const [error, setError] = useState('')\n\n\n    const login = async () => {\n        if (isLoginView) {\n            const result = await dispatch(fetchAsyncLogin(authen))\n\n            if (fetchAsyncLogin.fulfilled.match(result)) {\n                props.cookies.set(\"current-token\", result.payload.access, {maxAge: 3600, path: '/'});\n                setError('')\n            } else {\n                setError('ログイン情報が間違っています')\n            }\n        } else {\n            // const result = await dispatch(fetchAsyncRegister(authen));\n\n            // if (fetchAsyncRegister.fulfilled.match(result)) {\n            //     const result = await dispatch(fetchAsyncLogin(authen))\n            // }\n            // if (fetchAsyncLogin.fulfilled.match(result)) {\n            //     props.cookies.set(\"current-token\", result.payload.access, {maxAge: 3600, path: '/'});\n            // }\n        }\n    };\n\n    return (\n        <div className={styles.containerLogin}>\n            <div className={styles.appLogin}>\n                <h1>{isLoginView ? \"Login\" : \"Register\"}</h1>\n                <span>Email</span>\n                <input\n                    type=\"text\"\n                    className={styles.inputLog}\n                    name=\"username\"\n                    placeholder=\"\"\n                    onChange={(e) => dispatch(editEmail(e.target.value))}\n                    required\n                />\n                <span>Password</span>\n                <input\n                    type=\"password\"\n                    className={styles.inputLog}\n                    name=\"password\"\n                    placeholder=\"\"\n                    onChange={(e) => dispatch(editPassword(e.target.value))}\n                    required\n                />\n                <div>{error}</div>\n                <a href={`${apiUrl}accounts/password_reset_form/`} className={styles.forget_pas}>Forget password</a>\n                <div className={styles.switch}>\n                <Button\n                    variant=\"contained\"\n                    disabled={btnDisabler1}\n                    color=\"primary\"\n                    onClick={login}\n                >\n                    {isLoginView ? \"Login\" : \"Create\"}\n                </Button>\n                </div>\n                {/* <span\n                className={styles.switchText}\n                onClick={() => dispatch(toggleMode())}\n                >\n                {isLoginView ? \"Create Account ?\" : \"Back to Login\"}\n                </span> */}\n            </div>\n        </div>\n    );\n};\n\nexport default withCookies(Login)\n"]},"metadata":{},"sourceType":"module"}