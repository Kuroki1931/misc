{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kurokiso/Desktop/ut_finace/finance_web/new_git/finance_web/front/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kurokiso/Desktop/ut_finace/finance_web/new_git/finance_web/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import React from\"react\";import Button from\"@material-ui/core/Button\";import{useSelector,useDispatch}from\"react-redux\";import{withCookies}from'react-cookie';import styles from\"./Login.module.css\";import{editEmail,editPassword,toggleMode,fetchAsyncLogin,fetchAsyncRegister,selectAuthen,selectIsLoginView}from\"./loginSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Login=function Login(props){var dispatch=useDispatch();var authen=useSelector(selectAuthen);var isLoginView=useSelector(selectIsLoginView);var btnDisabler1=authen.email===\"\"||authen.password===\"\";var login=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var result;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!isLoginView){_context.next=7;break;}_context.next=3;return dispatch(fetchAsyncLogin(authen));case 3:result=_context.sent;if(fetchAsyncLogin.fulfilled.match(result)){props.cookies.set(\"current-token\",result.payload.access,{maxAge:3600,path:'/'});}_context.next=7;break;case 7:case\"end\":return _context.stop();}}},_callee);}));return function login(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:styles.containerLogin,children:/*#__PURE__*/_jsxs(\"div\",{className:styles.appLogin,children:[/*#__PURE__*/_jsx(\"h1\",{children:isLoginView?\"Login\":\"Register\"}),/*#__PURE__*/_jsx(\"span\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:styles.inputLog,name:\"username\",placeholder:\"\",onChange:function onChange(e){return dispatch(editEmail(e.target.value));},required:true}),/*#__PURE__*/_jsx(\"span\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",className:styles.inputLog,name:\"password\",placeholder:\"\",onChange:function onChange(e){return dispatch(editPassword(e.target.value));},required:true}),/*#__PURE__*/_jsx(\"a\",{href:\"http://localhost:8000/accounts/password_reset_form/\",className:styles.forget_pas,children:\"Forget password\"}),/*#__PURE__*/_jsx(\"div\",{className:styles.switch,children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",disabled:btnDisabler1,color:\"primary\",onClick:login,children:isLoginView?\"Login\":\"Create\"})})]})});};export default withCookies(Login);","map":{"version":3,"sources":["/Users/kurokiso/Desktop/ut_finace/finance_web/new_git/finance_web/front/src/features/login/Login.js"],"names":["React","Button","useSelector","useDispatch","withCookies","styles","editEmail","editPassword","toggleMode","fetchAsyncLogin","fetchAsyncRegister","selectAuthen","selectIsLoginView","Login","props","dispatch","authen","isLoginView","btnDisabler1","email","password","login","result","fulfilled","match","cookies","set","payload","access","maxAge","path","containerLogin","appLogin","inputLog","e","target","value","forget_pas","switch"],"mappings":"iTAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,WAAT,KAA4B,cAA5B,CACA,MAAOC,CAAAA,MAAP,KAAmB,oBAAnB,CAEA,OACEC,SADF,CAEEC,YAFF,CAGEC,UAHF,CAIEC,eAJF,CAKEC,kBALF,CAMEC,YANF,CAOEC,iBAPF,KAQO,cARP,C,wFAUA,GAAMC,CAAAA,KAAK,CAAG,QAARA,CAAAA,KAAQ,CAACC,KAAD,CAAW,CACrB,GAAMC,CAAAA,QAAQ,CAAGZ,WAAW,EAA5B,CACA,GAAMa,CAAAA,MAAM,CAAGd,WAAW,CAACS,YAAD,CAA1B,CACA,GAAMM,CAAAA,WAAW,CAAGf,WAAW,CAACU,iBAAD,CAA/B,CACA,GAAMM,CAAAA,YAAY,CAAGF,MAAM,CAACG,KAAP,GAAiB,EAAjB,EAAuBH,MAAM,CAACI,QAAP,GAAoB,EAAhE,CAGA,GAAMC,CAAAA,KAAK,0FAAG,kJACNJ,WADM,+CAEeF,CAAAA,QAAQ,CAACN,eAAe,CAACO,MAAD,CAAhB,CAFvB,QAEAM,MAFA,eAIN,GAAIb,eAAe,CAACc,SAAhB,CAA0BC,KAA1B,CAAgCF,MAAhC,CAAJ,CAA6C,CACzCR,KAAK,CAACW,OAAN,CAAcC,GAAd,CAAkB,eAAlB,CAAmCJ,MAAM,CAACK,OAAP,CAAeC,MAAlD,CAA0D,CAACC,MAAM,CAAE,IAAT,CAAeC,IAAI,CAAE,GAArB,CAA1D,EACH,CANK,4EAAH,kBAALT,CAAAA,KAAK,0CAAX,CAmBA,mBACI,YAAK,SAAS,CAAEhB,MAAM,CAAC0B,cAAvB,uBACI,aAAK,SAAS,CAAE1B,MAAM,CAAC2B,QAAvB,wBACI,oBAAKf,WAAW,CAAG,OAAH,CAAa,UAA7B,EADJ,cAEI,+BAFJ,cAGI,cACI,IAAI,CAAC,MADT,CAEI,SAAS,CAAEZ,MAAM,CAAC4B,QAFtB,CAGI,IAAI,CAAC,UAHT,CAII,WAAW,CAAC,EAJhB,CAKI,QAAQ,CAAE,kBAACC,CAAD,QAAOnB,CAAAA,QAAQ,CAACT,SAAS,CAAC4B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAV,CAAf,EALd,CAMI,QAAQ,KANZ,EAHJ,cAWI,kCAXJ,cAYI,cACI,IAAI,CAAC,UADT,CAEI,SAAS,CAAE/B,MAAM,CAAC4B,QAFtB,CAGI,IAAI,CAAC,UAHT,CAII,WAAW,CAAC,EAJhB,CAKI,QAAQ,CAAE,kBAACC,CAAD,QAAOnB,CAAAA,QAAQ,CAACR,YAAY,CAAC2B,CAAC,CAACC,MAAF,CAASC,KAAV,CAAb,CAAf,EALd,CAMI,QAAQ,KANZ,EAZJ,cAoBI,UAAG,IAAI,CAAC,qDAAR,CAA8D,SAAS,CAAE/B,MAAM,CAACgC,UAAhF,6BApBJ,cAqBI,YAAK,SAAS,CAAEhC,MAAM,CAACiC,MAAvB,uBACA,KAAC,MAAD,EACI,OAAO,CAAC,WADZ,CAEI,QAAQ,CAAEpB,YAFd,CAGI,KAAK,CAAC,SAHV,CAII,OAAO,CAAEG,KAJb,UAMKJ,WAAW,CAAG,OAAH,CAAa,QAN7B,EADA,EArBJ,GADJ,EADJ,CA0CH,CApED,CAsEA,cAAeb,CAAAA,WAAW,CAACS,KAAD,CAA1B","sourcesContent":["import React from \"react\";\nimport Button from \"@material-ui/core/Button\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { withCookies } from 'react-cookie';\nimport styles from \"./Login.module.css\";\n\nimport {\n  editEmail,\n  editPassword,\n  toggleMode,\n  fetchAsyncLogin,\n  fetchAsyncRegister,\n  selectAuthen,\n  selectIsLoginView,\n} from \"./loginSlice\";\n\nconst Login = (props) => {\n    const dispatch = useDispatch();\n    const authen = useSelector(selectAuthen);\n    const isLoginView = useSelector(selectIsLoginView);\n    const btnDisabler1 = authen.email === \"\" || authen.password === \"\";\n\n\n    const login = async () => {\n        if (isLoginView) {\n            const result = await dispatch(fetchAsyncLogin(authen))\n\n            if (fetchAsyncLogin.fulfilled.match(result)) {\n                props.cookies.set(\"current-token\", result.payload.access, {maxAge: 3600, path: '/'});\n            }\n        } else {\n            // const result = await dispatch(fetchAsyncRegister(authen));\n\n            // if (fetchAsyncRegister.fulfilled.match(result)) {\n            //     const result = await dispatch(fetchAsyncLogin(authen))\n            // }\n            // if (fetchAsyncLogin.fulfilled.match(result)) {\n            //     props.cookies.set(\"current-token\", result.payload.access, {maxAge: 3600, path: '/'});\n            // }\n        }\n    };\n\n    return (\n        <div className={styles.containerLogin}>\n            <div className={styles.appLogin}>\n                <h1>{isLoginView ? \"Login\" : \"Register\"}</h1>\n                <span>Email</span>\n                <input\n                    type=\"text\"\n                    className={styles.inputLog}\n                    name=\"username\"\n                    placeholder=\"\"\n                    onChange={(e) => dispatch(editEmail(e.target.value))}\n                    required\n                />\n                <span>Password</span>\n                <input\n                    type=\"password\"\n                    className={styles.inputLog}\n                    name=\"password\"\n                    placeholder=\"\"\n                    onChange={(e) => dispatch(editPassword(e.target.value))}\n                    required\n                />\n                <a href='http://localhost:8000/accounts/password_reset_form/' className={styles.forget_pas}>Forget password</a>\n                <div className={styles.switch}>\n                <Button\n                    variant=\"contained\"\n                    disabled={btnDisabler1}\n                    color=\"primary\"\n                    onClick={login}\n                >\n                    {isLoginView ? \"Login\" : \"Create\"}\n                </Button>\n                </div>\n                {/* <span\n                className={styles.switchText}\n                onClick={() => dispatch(toggleMode())}\n                >\n                {isLoginView ? \"Create Account ?\" : \"Back to Login\"}\n                </span> */}\n            </div>\n        </div>\n    );\n};\n\nexport default withCookies(Login)\n"]},"metadata":{},"sourceType":"module"}