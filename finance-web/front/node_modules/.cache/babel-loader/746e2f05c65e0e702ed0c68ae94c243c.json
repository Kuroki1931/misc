{"ast":null,"code":"import _regeneratorRuntime from\"/Users/kurokiso/Desktop/ut_finace/finance_web/new_git/finance_web/front/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/kurokiso/Desktop/ut_finace/finance_web/new_git/finance_web/front/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/kurokiso/Desktop/ut_finace/finance_web/new_git/finance_web/front/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from\"react\";import classes from'./Payment.module.css';import{CardElement,useElements,useStripe}from\"@stripe/react-stripe-js\";import ApiService from\"./api\";import Button from'@material-ui/core/Button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Payment=function Payment(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var stripe=useStripe();var elements=useElements();var handleChange=function handleChange(event){if(event.error){setError(event.error.message);}else{setError(null);}};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(event){var card,_yield$stripe$createP,paymentMethod,error;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:event.preventDefault();card=elements.getElement(CardElement);_context.next=4;return stripe.createPaymentMethod({type:'card',card:card});case 4:_yield$stripe$createP=_context.sent;paymentMethod=_yield$stripe$createP.paymentMethod;error=_yield$stripe$createP.error;ApiService.saveStripeInfo({email:email,payment_method_id:paymentMethod.id}).then(function(response){console.log(response.data);}).catch(function(error){console.log(error);});case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:classes.all,children:[/*#__PURE__*/_jsx(\"div\",{className:classes.head,children:\"\\u6C7A\\u6E08\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:classes.form_all,children:[/*#__PURE__*/_jsxs(\"div\",{className:classes.email_all,children:[/*#__PURE__*/_jsx(\"div\",{htmlFor:\"email\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"input\",{className:classes.email_input,id:\"email\",name:\"name\",type:\"email\",placeholder:\"jenny.rosen@example.com\",required:true,value:email,onChange:function onChange(event){setEmail(event.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.credit_all,children:[/*#__PURE__*/_jsx(\"label\",{for:\"card-element\",children:\"Credit or debit card\"}),/*#__PURE__*/_jsx(CardElement,{id:\"card-element\",onChange:handleChange,className:classes.card}),/*#__PURE__*/_jsx(\"div\",{className:\"card-errors\",role:\"alert\",children:error})]}),/*#__PURE__*/_jsx(\"div\",{className:classes.button_all,children:/*#__PURE__*/_jsx(Button,{type:\"submit\",className:\"submit-btn\",variant:\"contained\",color:\"primary\",children:\"Submit Payment\"})})]})]});};export default Payment;","map":{"version":3,"sources":["/Users/kurokiso/Desktop/ut_finace/finance_web/new_git/finance_web/front/src/features/payment/Payment.js"],"names":["React","useState","classes","CardElement","useElements","useStripe","ApiService","Button","Payment","error","setError","email","setEmail","stripe","elements","handleChange","event","message","handleSubmit","preventDefault","card","getElement","createPaymentMethod","type","paymentMethod","saveStripeInfo","payment_method_id","id","then","response","console","log","data","catch","all","head","form_all","email_all","email_input","target","value","credit_all","button_all"],"mappings":"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","sourcesContent":["import React, {useState} from \"react\";\nimport classes from './Payment.module.css'\nimport {CardElement, useElements, useStripe} from \"@stripe/react-stripe-js\";\nimport ApiService from \"./api\";\nimport Button from '@material-ui/core/Button';\n\nconst Payment = () => {\n    const [error, setError] = useState(null);\n    const [email, setEmail] = useState('');\n    const stripe = useStripe();\n    const elements = useElements();\n\n    const handleChange = (event) => {\n        if (event.error) {\n          setError(event.error.message);\n        } else {\n          setError(null);\n        }\n    }\n\n    const handleSubmit = async (event) => {\n        event.preventDefault();\n        const card = elements.getElement(CardElement);\n \n        const {paymentMethod, error} = await stripe.createPaymentMethod({\n            type: 'card',\n            card: card\n        });\n        ApiService.saveStripeInfo({\n            email: email, payment_method_id: paymentMethod.id})\n          .then(response => {\n            console.log(response.data);\n          }).catch(error => {\n            console.log(error)\n        })\n        \n    };\n\n\n    return (\n        <div className={classes.all}>\n            <div className={classes.head}>\n                決済\n            </div>\n            <form onSubmit={handleSubmit} className={classes.form_all}>\n                <div className={classes.email_all}>\n                    <div htmlFor=\"email\">Email Address</div>\n                    <input className={classes.email_input} id=\"email\" name=\"name\" type=\"email\" \n                     placeholder=\"jenny.rosen@example.com\" required \n                     value={email} onChange={(event) => { setEmail(event.target.value)}} \n                    />\n                </div>\n                <div className={classes.credit_all}>\n                    <label for=\"card-element\">Credit or debit card</label> \n                    <CardElement id=\"card-element\" onChange={handleChange} className={classes.card}/>\n                    <div className=\"card-errors\" role=\"alert\">{error}</div>\n                </div>\n                <div className={classes.button_all}>\n                    <Button type=\"submit\" className=\"submit-btn\" variant=\"contained\" color=\"primary\">\n                        Submit Payment\n                    </Button>\n                </div>\n            </form>\n        </div>\n    )\n}\n\nexport default Payment\n"]},"metadata":{},"sourceType":"module"}